{"ast":null,"code":"import _regeneratorRuntime from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";var Api=axios.create({baseURL:\"http://localhost:5000/\"});var AuthService=/*#__PURE__*/function(){function AuthService(){_classCallCheck(this,AuthService);}_createClass(AuthService,[{key:\"signup\",value:function(){var _signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userData){var auth;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:auth=null;_context.next=3;return Api.post(\"/signup\",userData).then(function(response){if(response.status===201){sessionStorage.accessToken=response.data.accessToken;localStorage.refreshToken=response.data.refreshToken;localStorage.email=userData.email;auth=true;}}).catch(function(error){console.log(error);});case 3:return _context.abrupt(\"return\",auth);case 4:case\"end\":return _context.stop();}}},_callee);}));function signup(_x){return _signup.apply(this,arguments);}return signup;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userData){var auth;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:auth=false;_context2.next=3;return Api.post(\"/login\",userData).then(function(response){if(response.status===200){auth=true;sessionStorage.accessToken=response.data.accessToken;localStorage.refreshToken=response.data.refreshToken;localStorage.email=userData.email;}}).catch(function(error){console.log(error);});case 3:return _context2.abrupt(\"return\",auth);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function login(_x2){return _login.apply(this,arguments);}return login;}()},{key:\"getRefreshToken\",value:function(){var _getRefreshToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var auth;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:auth=null;_context3.next=3;return Api.post(\"/getRefreshToken\",{},{headers:{Authorization:\"Bearer \"+localStorage.refreshToken}}).then(function(response){if(response.status===201){sessionStorage.accessToken=response.data.accessToken;localStorage.refreshToken=response.data.refreshToken;auth=true;}}).catch(function(error){console.log(error);});case 3:return _context3.abrupt(\"return\",auth);case 4:case\"end\":return _context3.stop();}}},_callee3);}));function getRefreshToken(){return _getRefreshToken.apply(this,arguments);}return getRefreshToken;}()},{key:\"getAccessToken\",value:function(){var _getAccessToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var auth;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:auth=null;_context4.next=3;return Api.post(\"/getAccessToken\",{},{headers:{Authorization:\"Bearer \"+localStorage.refreshToken}}).then(function(response){if(response.status===201){sessionStorage.accessToken=response.data.accessToken;auth=true;}}).catch(function(error){console.log(error);});case 3:return _context4.abrupt(\"return\",auth);case 4:case\"end\":return _context4.stop();}}},_callee4);}));function getAccessToken(){return _getAccessToken.apply(this,arguments);}return getAccessToken;}()}]);return AuthService;}();export default AuthService;","map":{"version":3,"sources":["/Users/erik/Desktop/Software/dex/frontend/src/Shared/AuthService.js"],"names":["axios","Api","create","baseURL","AuthService","userData","auth","post","then","response","status","sessionStorage","accessToken","data","localStorage","refreshToken","email","catch","error","console","log","headers","Authorization"],"mappings":"2nBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,GAAMC,CAAAA,GAAG,CAAGD,KAAK,CAACE,MAAN,CAAa,CACvBC,OAAO,CAAE,wBADc,CAAb,CAAZ,C,GAIMC,CAAAA,W,iOACSC,Q,2HACPC,I,CAAO,I,uBACLL,CAAAA,GAAG,CAACM,IAAJ,CAAS,SAAT,CAAoBF,QAApB,EACHG,IADG,CACE,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BC,cAAc,CAACC,WAAf,CAA6BH,QAAQ,CAACI,IAAT,CAAcD,WAA3C,CACAE,YAAY,CAACC,YAAb,CAA4BN,QAAQ,CAACI,IAAT,CAAcE,YAA1C,CACAD,YAAY,CAACE,KAAb,CAAqBX,QAAQ,CAACW,KAA9B,CACAV,IAAI,CAAG,IAAP,CACD,CACF,CARG,EASHW,KATG,CASG,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAXG,C,wCAYCZ,I,2PAGGD,Q,+HACNC,I,CAAO,K,wBACLL,CAAAA,GAAG,CAACM,IAAJ,CAAS,QAAT,CAAmBF,QAAnB,EACHG,IADG,CACE,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BJ,IAAI,CAAG,IAAP,CACAK,cAAc,CAACC,WAAf,CAA6BH,QAAQ,CAACI,IAAT,CAAcD,WAA3C,CACAE,YAAY,CAACC,YAAb,CAA4BN,QAAQ,CAACI,IAAT,CAAcE,YAA1C,CACAD,YAAY,CAACE,KAAb,CAAqBX,QAAQ,CAACW,KAA9B,CACD,CACF,CARG,EASHC,KATG,CASG,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAXG,C,yCAYCZ,I,8YAIHA,I,CAAO,I,wBACLL,CAAAA,GAAG,CAACM,IAAJ,CACJ,kBADI,CAEJ,EAFI,CAGJ,CACEc,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYR,YAAY,CAACC,YADjC,CADX,CAHI,EASHP,IATG,CASE,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BC,cAAc,CAACC,WAAf,CAA6BH,QAAQ,CAACI,IAAT,CAAcD,WAA3C,CACAE,YAAY,CAACC,YAAb,CAA4BN,QAAQ,CAACI,IAAT,CAAcE,YAA1C,CACAT,IAAI,CAAG,IAAP,CACD,CACF,CAfG,EAgBHW,KAhBG,CAgBG,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAlBG,C,yCAmBCZ,I,uaAIHA,I,CAAO,I,wBACLL,CAAAA,GAAG,CAACM,IAAJ,CACJ,iBADI,CAEJ,EAFI,CAGJ,CACEc,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYR,YAAY,CAACC,YADjC,CADX,CAHI,EASHP,IATG,CASE,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BC,cAAc,CAACC,WAAf,CAA6BH,QAAQ,CAACI,IAAT,CAAcD,WAA3C,CACAN,IAAI,CAAG,IAAP,CACD,CACF,CAdG,EAeHW,KAfG,CAeG,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAjBG,C,yCAkBCZ,I,yLAIX,cAAeF,CAAAA,WAAf","sourcesContent":["import axios from \"axios\";\nconst Api = axios.create({\n  baseURL: \"http://localhost:5000/\",\n});\n\nclass AuthService {\n  async signup(userData) {\n    let auth = null;\n    await Api.post(\"/signup\", userData)\n      .then((response) => {\n        if (response.status === 201) {\n          sessionStorage.accessToken = response.data.accessToken;\n          localStorage.refreshToken = response.data.refreshToken;\n          localStorage.email = userData.email;\n          auth = true;\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    return auth;\n  }\n\n  async login(userData) {\n    let auth = false;\n    await Api.post(\"/login\", userData)\n      .then((response) => {\n        if (response.status === 200) {\n          auth = true;\n          sessionStorage.accessToken = response.data.accessToken;\n          localStorage.refreshToken = response.data.refreshToken;\n          localStorage.email = userData.email;\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    return auth;\n  }\n\n  async getRefreshToken() {\n    let auth = null;\n    await Api.post(\n      \"/getRefreshToken\",\n      {},\n      {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.refreshToken,\n        },\n      }\n    )\n      .then((response) => {\n        if (response.status === 201) {\n          sessionStorage.accessToken = response.data.accessToken;\n          localStorage.refreshToken = response.data.refreshToken;\n          auth = true;\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    return auth;\n  }\n\n  async getAccessToken() {\n    let auth = null;\n    await Api.post(\n      \"/getAccessToken\",\n      {},\n      {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.refreshToken,\n        },\n      }\n    )\n      .then((response) => {\n        if (response.status === 201) {\n          sessionStorage.accessToken = response.data.accessToken;\n          auth = true;\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    return auth;\n  }\n}\n\nexport default AuthService;\n"]},"metadata":{},"sourceType":"module"}