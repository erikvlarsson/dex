{"ast":null,"code":"import _defineProperty from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/erik/Desktop/Software/dex/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useContext,useEffect}from\"react\";import AuthService from\"../../Shared/AuthService\";import{unToast,toast}from\"../../Components/Alert/Toast\";import Spinner from\"../../Components/Loading/Spinner\";import{AuthContext}from\"../../Contexts/AuthContext\";export default function Login(_ref){var goToSignup=_ref.goToSignup;var _useContext=useContext(AuthContext),setAuth=_useContext.setAuth;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var authService=new AuthService();var _useState3=useState({email:localStorage.email,password:\"\"}),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];useEffect(function(){return function(){};},[]);var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(userData.password.length>0&&userData.email.length>0){_context.next=5;break;}toast(400,\"Please enter both fields.\");_context.next=7;break;case 5:_context.next=7;return authService.login(userData).then(function(auth){if(auth){setLoading(true);unToast();setAuth(auth);}else{toast(401,\"Incorrect login details.\");}});case 7:setLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref2.apply(this,arguments);};}();var handleWrite=function handleWrite(event){setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));};var className=\"margin-5 padding-10\";return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log in\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",placeholder:\"Email\",value:userData.email,autoComplete:\"off\",className:className,onChange:handleWrite}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",autoComplete:\"off\",className:className,onChange:handleWrite}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:className+\" mainButton\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"div\",{className:className,style:{textAlign:\"center\"},children:\"Forgot your password?\"}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"100%\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:goToSignup,style:{width:\"70%\",alignSelf:\"center\"},className:className+\" altButton\",children:\"Sign up\"})]})]})});}","map":{"version":3,"sources":["/Users/erik/Desktop/Software/dex/frontend/src/Pages/Authentication/Login.js"],"names":["React","useState","useContext","useEffect","AuthService","unToast","toast","Spinner","AuthContext","Login","goToSignup","setAuth","loading","setLoading","authService","email","localStorage","password","userData","setUserData","handleLogin","event","preventDefault","length","login","then","auth","handleWrite","target","name","value","className","textAlign","width","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport AuthService from \"../../Shared/AuthService\";\nimport { unToast, toast } from \"../../Components/Alert/Toast\";\nimport Spinner from \"../../Components/Loading/Spinner\";\nimport { AuthContext } from \"../../Contexts/AuthContext\";\n\nexport default function Login({ goToSignup }) {\n  const { setAuth } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n\n  const authService = new AuthService();\n  const [userData, setUserData] = useState({\n    email: localStorage.email,\n    password: \"\",\n  });\n\n  useEffect(() => {\n    return () => {};\n  }, []);\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    if (!(userData.password.length > 0 && userData.email.length > 0)) {\n      toast(400, \"Please enter both fields.\");\n    } else {\n      await authService.login(userData).then((auth) => {\n        if (auth) {\n          setLoading(true);\n          unToast();\n          setAuth(auth);\n        } else {\n          toast(401, \"Incorrect login details.\");\n        }\n      });\n    }\n    setLoading(false);\n  };\n\n  const handleWrite = (event) => {\n    setUserData({\n      ...userData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const className = \"margin-5 padding-10\";\n\n  return (\n    <>\n      {loading ? (\n        <Spinner />\n      ) : (\n        <div>\n          <h1>Log in</h1>\n          <form onSubmit={handleLogin}>\n            <input\n              type=\"text\"\n              name=\"email\"\n              placeholder=\"Email\"\n              value={userData.email}\n              autoComplete=\"off\"\n              className={className}\n              onChange={handleWrite}\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              autoComplete=\"off\"\n              className={className}\n              onChange={handleWrite}\n            />\n            <button type=\"submit\" className={className + \" mainButton\"}>\n              Log in\n            </button>\n            <div className={className} style={{ textAlign: \"center\" }}>\n              Forgot your password?\n            </div>\n            <hr style={{ width: \"100%\" }} />\n            <button\n              onClick={goToSignup}\n              style={{ width: \"70%\", alignSelf: \"center\" }}\n              className={className + \" altButton\"}\n            >\n              Sign up\n            </button>\n          </form>\n        </div>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}